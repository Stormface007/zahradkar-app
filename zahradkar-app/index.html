<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zahr√°dk√°≈ôsk√Ω syst√©m</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Indik√°tor akce -->
  <div id="actionIndicator" class="action-indicator">
    <img src="img/Plodina_mrkev .png" alt="Vizualizace akce"/>
  </div>

  <!-- P≈ôihla≈°ovac√≠ formul√°≈ô -->
  <div id="loginDiv">
    <img src="img/icon_trimmed_transparent_customcolor.png" alt="Logo" class="logo-small"/>
    <input type="text" id="username" placeholder="U≈æivatelsk√© jm√©no"/>
    <input type="password" id="password" placeholder="Heslo"/>
    <button onclick="login()">P≈ôihl√°sit</button>
    <div id="loginMsg"></div>
  </div>

  <!-- Hlavn√≠ aplikace -->
  <div id="appDiv" style="display:none;">
    <div class="top-panel">
      <div id="weatherContainer" class="toolbar-weather">
        <img id="weatherIcon" alt="Poƒças√≠"/>
        <div id="weatherTemp">‚Äì</div>
      </div>
      <img id="exitIcon" class="icon-button" src="img/Exit.png" alt="Odhl√°sit se" onclick="logout()"/>
      <img id="userIcon" class="icon-button" src="img/User.png" alt="U≈æivatel"/>
    </div>

    <div class="table-actions">
      <button onclick="deleteSelected()">üóëÔ∏è Smazat oznaƒçen√©</button>
    </div>
    <div class="table-container">
      <table id="zahonyTable">
        <thead>
          <tr><th></th><th>N√°zev z√°honu</th><th>Velikost</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <h3>P≈ôidat nov√Ω z√°hon</h3>
    <input type="text" id="newNazev" placeholder="N√°zev z√°honu"/>
    <input type="number" id="newDelka" placeholder="D√©lka (m)" min="0"/>
    <input type="number" id="newSirka" placeholder="≈†√≠≈ôka (m)" min="0"/>
    <button onclick="addZahon()">P≈ôidat</button>
  </div>

  <!-- MOD√ÅLN√ç OKNO pro editaci z√°honu a akce -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <!-- Boƒçn√≠ panel ikon -->
      <div class="side-icons">
        <img id="icon-mereni"    class="side-icon" src="img/mereni.png"    alt="Mƒõ≈ôen√≠"    onclick="onIconClick('mereni')"/>
        <img id="icon-seti"      class="side-icon" src="img/sklizen.png"      alt="Set√≠"      onclick="onIconClick('seti')"/>
        <img id="icon-hnojeni"   class="side-icon" src="img/hnojeni.png"   alt="Hnojen√≠"   onclick="onIconClick('hnojeni')"/>
        <img id="icon-analyza"   class="side-icon" src="img/analyza.png"   alt="Anal√Ωza"   onclick="onIconClick('analyza')"/>
        <img id="icon-nastaveni" class="side-icon" src="img/nastaveni.png" alt="Nastaven√≠" onclick="onIconClick('nastaveni')"/>
      </div>

      <div class="modal-body">
        <div id="nazevZahonu" class="modal-zahon-name"></div>
        
        <!-- Z√°kladn√≠ editace z√°honu -->
        <div id="modalViewDefault">
          <h3>√öprava z√°honu</h3>
          <input type="text" id="editNazev" placeholder="N√°zev z√°honu"/>
          <div class="dimensions">
            <input type="number" id="editDelka" placeholder="D√©lka (m)" min="0" oninput="updatePlocha()"/>
            <input type="number" id="editSirka" placeholder="≈†√≠≈ôka (m)" min="0" oninput="updatePlocha()"/>
          </div>
          <div class="plocha">Plocha: <span id="vypocetPlochy">0</span> </div>
          <div id="zahonVizualizace">
            <div id="canvasContainer">
             <canvas id="zahonCanvas" style="width: 100%; height: 100%;" onclick="openZoom()"></canvas>
            </div>
          </div>
          <img src="img/Safe.png"    alt="Ulo≈æit" class="modal-btn" onclick="saveZahon()"/>
          <img src="img/Goback .png"  alt="Zav≈ô√≠t" class="modal-btn" onclick="closeModal()"/>
        </div>

       <!-- Formul√°≈ô ud√°lost√≠ / anal√Ωzy -->
<div id="modalViewUdalost" style="display:none;">
  <div id="udalostFormContainer">
    <label for="udalostDatum">Datum set√≠:</label>
    <input type="date" id="udalostDatum"/>
    <label for="plodinaSelect">Plodina:</label>
    <select id="plodinaSelect"></select>
    <!-- SEM P≈òIDEJ BLOK -->
    <div id="doporuceniHnojeni" style="font-size:0.95em;color:#33691e; margin-top:5px;"></div>
    <!-- zbytek formul√°≈ôe: -->
    <input id="udalostVynos" ...>
    <!-- dal≈°√≠ pole -->
  </div>
</div>

        </div>
      </div>
    </div>
  </div>

  <!-- MOD√ÅLN√ç OKNO PRO ZVƒöT≈†EN√ù N√ÅHLED -->
  <div id="zoomModal" class="modal">
    <div class="modal-content" style="padding: 20px; max-width: 800px;">
      <h3>Zvƒõt≈°en√Ω n√°hled z√°honu</h3>
      <canvas id="zoomCanvas" width="600" height="400"></canvas>
      <br>
      <button onclick="closeZoomModal()">Zav≈ô√≠t</button>
    </div>
  </div>
  <!-- MOD√ÅLN√ç OKNO PRO DETAILN√ç DOPORUƒåEN√ç HNOJEN√ç -->
<div id="modalDetailDoporuceni" class="modal" style="display:none;">
  <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
    <h3 style="margin-top:0;">üìã Detailn√≠ doporuƒçen√≠ hnojen√≠ a mikroprvk≈Ø</h3>
    <div id="detailDoporuceniObsah" style="line-height: 1.6;">
      <!-- Obsah se dynamicky naƒçte z JS -->
    </div>
    <br>
    <button onclick="zavriDetailDoporuceni()" style="padding: 10px 20px;">Zav≈ô√≠t</button>
  </div>
</div>

</body>
</html>
