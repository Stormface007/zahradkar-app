<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZahrÃ¡dkÃ¡Å™skÃ½ systÃ©m</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="script.js" defer></script>
</head>
<body>
  <!-- IndikÃ¡tor akce -->
  <div id="actionIndicator" class="action-indicator">
    <img src="img/Plodina_mrkev .png" alt="Vizualizace akce"/>
  </div>

  <!-- PÅ™ihlaÅ¡ovacÃ­ formulÃ¡Å™ -->
  <div id="loginDiv">
    <img src="img/icon_trimmed_transparent_customcolor.png" alt="Logo" class="logo-small"/>
    <input type="text" id="username" placeholder="UÅ¾ivatelskÃ© jmÃ©no"/>
    <input type="password" id="password" placeholder="Heslo"/>
    <button onclick="login()">PÅ™ihlÃ¡sit</button>
    <div id="loginMsg"></div>
  </div>

  <!-- HlavnÃ­ aplikace -->
  <div id="appDiv" style="display:none;">
    <div class="top-panel">
      <div id="weatherContainer" class="toolbar-weather">
        <img id="weatherIcon" alt="PoÄasÃ­"/>
        <div id="weatherTemp">â€“</div>
      </div>
      <img id="exitIcon" class="icon-button" src="img/Exit.png" alt="OdhlÃ¡sit se" onclick="logout()"/>
      <img id="userIcon" class="icon-button" src="img/User.png" alt="UÅ¾ivatel"/>
    </div>

    <div class="table-actions">
      <button onclick="deleteSelected()">ğŸ—‘ï¸ Smazat oznaÄenÃ©</button>
    </div>
    <div class="table-container">
      <table id="zahonyTable">
        <thead>
          <tr><th></th><th>NÃ¡zev zÃ¡honu</th><th>Velikost</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="pridatZahonForm">
  <h3>PÅ™idat novÃ½ zÃ¡hon</h3>
  <label>NÃ¡zev: <input type="text" id="newNazev"/></label><br>
  <label>DÃ©lka (m): <input type="number" id="newDelka"/></label><br>
  <label>Å Ã­Å™ka (m): <input type="number" id="newSirka"/></label><br>
  
  <!-- âœ… VÃBÄšR TYPU PLOCHY -->
  <div style="margin: 10px 0;">
    <strong>Typ plochy:</strong><br>
    <label style="display: block; margin: 5px 0;">
      <input type="radio" name="typPlochy" value="zahon" checked> ğŸŒ¾ ZÃ¡hon
    </label>
    <label style="display: block; margin: 5px 0;">
      <input type="radio" name="typPlochy" value="sklenik"> ğŸ  SklenÃ­k
    </label>
    <label style="display: block; margin: 5px 0;">
      <input type="radio" name="typPlochy" value="nadoba"> ğŸª´ NÃ¡doba (truhlÃ­k/pytel)
    </label>
  </div>
  
  <button onclick="addZahon()">PÅ™idat</button>
</div>

  </div>

  <!-- MODÃLNÃ OKNO pro editaci zÃ¡honu a akce -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <!-- BoÄnÃ­ panel ikon -->
      <div class="side-icons">
        <img id="icon-mereni"    class="side-icon" src="img/mereni.png"    alt="MÄ›Å™enÃ­"    onclick="onIconClick('mereni')"/>
        <img id="icon-seti"      class="side-icon" src="img/sklizen.png"      alt="SetÃ­"      onclick="onIconClick('seti')"/>
        <img id="icon-hnojeni"   class="side-icon" src="img/hnojeni.png"   alt="HnojenÃ­"   onclick="onIconClick('hnojeni')"/>
        <img id="icon-analyza"   class="side-icon" src="img/analyza.png"   alt="AnalÃ½za"   onclick="onIconClick('analyza')"/>
        <img id="icon-nastaveni" class="side-icon" src="img/nastaveni.png" alt="NastavenÃ­" onclick="onIconClick('nastaveni')"/>
      </div>

      <div class="modal-body">
        <div id="nazevZahonu" class="modal-zahon-name"></div>
        
        <!-- ZÃ¡kladnÃ­ editace zÃ¡honu -->
        <div id="modalViewDefault">
          <h3>Ãšprava zÃ¡honu</h3>
          <input type="text" id="editNazev" placeholder="NÃ¡zev zÃ¡honu"/>
          <div class="dimensions">
            <input type="number" id="editDelka" placeholder="DÃ©lka (m)" min="0" oninput="updatePlocha()"/>
            <input type="number" id="editSirka" placeholder="Å Ã­Å™ka (m)" min="0" oninput="updatePlocha()"/>
          </div>
          <div class="plocha">Plocha: <span id="vypocetPlochy">0</span> </div>
          <div id="zahonVizualizace">
            <div id="canvasContainer">
             <canvas id="zahonCanvas" style="width: 100%; height: 100%;" onclick="openZoom()"></canvas>
            </div>
          </div>
          <img src="img/Safe.png"    alt="UloÅ¾it" class="modal-btn" onclick="saveZahon()"/>
          <img src="img/Goback .png"  alt="ZavÅ™Ã­t" class="modal-btn" onclick="closeModal()"/>
        </div>

       <!-- FormulÃ¡Å™ udÃ¡lostÃ­ / analÃ½zy -->
<div id="modalViewUdalost" style="display:none;">
  <div id="udalostFormContainer">
    <label for="udalostDatum">Datum setÃ­:</label>
    <input type="date" id="udalostDatum"/>
    <label for="plodinaSelect">Plodina:</label>
    <select id="plodinaSelect"></select>
    <!-- SEM PÅ˜IDEJ BLOK -->
    <div id="doporuceniHnojeni" style="font-size:0.95em;color:#33691e; margin-top:5px;"></div>
    <!-- zbytek formulÃ¡Å™e: -->
    <input id="udalostVynos" ...>
    <!-- dalÅ¡Ã­ pole -->
  </div>
</div>

        </div>
      </div>
    </div>
  </div>

  <!-- MODÃLNÃ OKNO PRO ZVÄšTÅ ENÃ NÃHLED -->
  <div id="zoomModal" class="modal">
    <div class="modal-content" style="padding: 20px; max-width: 800px;">
      <h3>ZvÄ›tÅ¡enÃ½ nÃ¡hled zÃ¡honu</h3>
      <canvas id="zoomCanvas" width="600" height="400"></canvas>
      <br>
      <button onclick="closeZoomModal()">ZavÅ™Ã­t</button>
    </div>
  </div>
<!-- MODÃLNÃ OKNO PRO DETAILNÃ DOPORUÄŒENÃ -->
<div id="modalDetailDoporuceni" class="modal" style="display:none;">
  <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
    <h3 style="margin-top:0;">ğŸ“‹ DetailnÃ­ doporuÄenÃ­ hnojenÃ­ a mikroprvkÅ¯</h3>
    
    <!-- âœ… PÅ˜EPÃNAÄŒ PÅ˜ÃSTUPU -->
    <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
      <div style="margin-bottom: 10px;">
        <strong>Typ plochy:</strong> 
        <span id="typPlochyInfo"></span>
      </div>
      
      <div>
        <strong>PÅ™Ã­stup k hnojenÃ­:</strong>
        <div style="display: flex; gap: 15px; margin-top: 8px;">
          <label style="cursor: pointer;">
            <input type="radio" name="pristupModal" value="chemicky" onchange="zmenPristupModal('chemicky')">
            ğŸ§ª Chemicky
          </label>
          <label style="cursor: pointer;">
            <input type="radio" name="pristupModal" value="kombinace" checked onchange="zmenPristupModal('kombinace')">
            ğŸŒ¿ KombinovanÄ›
          </label>
          <label style="cursor: pointer;">
            <input type="radio" name="pristupModal" value="organicky" onchange="zmenPristupModal('organicky')">
            ğŸŒ± Organicky
          </label>
        </div>
      </div>
    </div>
    
    <!-- OBSAH DOPORUÄŒENÃ -->
    <div id="detailDoporuceniObsah" style="line-height: 1.6;">
      <!-- Obsah se dynamicky naÄte -->
    </div>
    
    <br>
    <button onclick="zavriDetailDoporuceni()" style="padding: 10px 20px;">ZavÅ™Ã­t</button>
  </div>
</div>

</body>
</html>
